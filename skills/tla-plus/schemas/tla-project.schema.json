{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-tools/schemas/tla-project.json",
  "title": "TLA+ Project Configuration",
  "description": "Configuration for a TLA+ formal verification project",
  "type": "object",
  "required": ["version", "specsDir", "models"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.0.0"
    },
    "specsDir": {
      "type": "string",
      "description": "Directory containing TLA+ specifications",
      "default": "specs/tla+"
    },
    "toolsDir": {
      "type": "string",
      "description": "Directory for TLA+ tools (tla2tools.jar)",
      "default": "specs/tla+/.tools"
    },
    "tlcVersion": {
      "type": "string",
      "description": "TLC version to use",
      "default": "1.8.0"
    },
    "apalacheVersion": {
      "type": "string",
      "description": "Apalache version to use (optional)",
      "default": "0.44.0"
    },
    "models": {
      "type": "array",
      "description": "List of TLA+ models in this project",
      "items": {
        "$ref": "#/definitions/Model"
      }
    },
    "ciStrategy": {
      "$ref": "#/definitions/CIStrategy"
    }
  },
  "definitions": {
    "Model": {
      "type": "object",
      "required": ["name", "specFile"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Model name (directory name)",
          "pattern": "^[a-z][a-z0-9-]*$"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of what this model verifies"
        },
        "specFile": {
          "type": "string",
          "description": "Main specification file (.tla)",
          "pattern": "\\.tla$"
        },
        "configs": {
          "type": "array",
          "description": "Configuration files for this model",
          "items": {
            "type": "string",
            "pattern": "\\.cfg$"
          }
        },
        "buggyVariant": {
          "type": "string",
          "description": "Buggy variant for negative testing",
          "pattern": "\\.tla$"
        },
        "verificationStrategy": {
          "type": "string",
          "description": "Default verification approach",
          "enum": ["tlc-simulation", "tlc-bfs", "apalache-bounded", "apalache-inductive"],
          "default": "tlc-simulation"
        },
        "lastVerified": {
          "type": "string",
          "description": "ISO 8601 timestamp of last successful verification",
          "format": "date-time"
        },
        "verificationResult": {
          "type": "object",
          "description": "Last verification result",
          "properties": {
            "success": { "type": "boolean" },
            "statesGenerated": { "type": "integer" },
            "distinctStates": { "type": "integer" },
            "duration": { "type": "number", "description": "Duration in seconds" }
          }
        }
      }
    },
    "CIStrategy": {
      "type": "object",
      "description": "CI/CD verification strategy",
      "properties": {
        "defaultMode": {
          "type": "string",
          "description": "Default verification mode for PRs",
          "enum": ["simulation", "standard", "thorough"],
          "default": "simulation"
        },
        "simulationDepth": {
          "type": "integer",
          "description": "Number of behaviors to sample in simulation mode",
          "default": 100000
        },
        "fullVerificationBranches": {
          "type": "array",
          "description": "Branches that get thorough verification",
          "items": { "type": "string" },
          "default": ["main"]
        },
        "timeoutMinutes": {
          "type": "integer",
          "description": "Maximum verification time in minutes",
          "default": 30
        }
      }
    }
  }
}
